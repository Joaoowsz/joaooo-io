var request = require('request');

var HyperRequestAPI = function(){
    if (!(this instanceof HyperRequestAPI)) return new HyperRequestAPI();
};

HyperRequestAPI.prototype._simpleGet = function(url, cb) {
    request(url, { json: true }, function(err, res, body) {
        if (typeof body === 'undefined')
            return cb(new Error('Esta request gerou um erro.'));

        if (body.error)
            return cb(new Error(body.error + ": " + body.errorMessage));

        cb(null, body);
    });
};


HyperRequestAPI.prototype.makeRequest = function(requestlink, cb) {
    if (typeof requestlink !== "string")
        throw new Error('RequestLink is not a string');



    if (typeof cb !== "function")
        throw new Error('Callback was not a function');

    this._simpleGet(requestlink, cb);
};
module.exports = HyperRequestAPI();